<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <!--CSS-->
        <style type="text/css">
            #lname{
                font-size: 30px;
            }
            
            .container{
                position: relative;
                background-color: blueviolet;
                height: 100%;
            }
        </style>
        
        <!--load socket-->
        <script src="https://cdn.socket.io/socket.io-1.3.4.js"></script>
        <!--Load jquery-->
        <script src="https://code.jquery.com/jquery-1.12.3.min.js"></script>
        <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
               //load cards
               //attach event handlers to buttons
               //then execute following code
               var socket = io.connect('localhost:3000');
               socket.on('hand', function (cards) {
                    loadGrid(cards);
                });
               socket.on('players', function (players) {
                    loadStatus(players);
                });
            });
            
            //card object to hold picture of card and ID
            function card()
            
            //Loads the grid of cards
            function loadGrid(cards){
                
            }
            //Takes in an array of players and
            //displays their info in the player table
            //on the right side of the page
            function loadStatus(players){
                
            }
            
            //empty function
            function nullFcn(result){ }
            
            //Ajax handler
            //method is the http method to be used in the call,
            //cmd is the command/service we are calling on the node server,
            //params is the JavaScript object holding the parameters for the Ajax call,
            //fcn is the one parameter function to be called on successful completion
            function doAjaxCall(method, cmd, params, fcn) {
                $.ajax("http://localhost:3000/setgameserver/" + cmd,
                {type: method,processData: true,data: params,dataType: "jsonp",
                    success: function (result) { fcn(result) },
                    error: function (jqXHR, textStatus, errorThrown) {
                        alert("Error: " + jqXHR.responseText);
                        alert("Error: " + textStatus);
                        alert("Error: " + errorThrown);
                    }
                });
            }
            
            function login(loginname){
                doAjaxCall("GET","login",{loginName:loginname},
                        function(result){
                            myid = result;
                            loadName();
                        });
            }
            
            //Ajax call
            function loadName(){
                doAjaxCall("GET","loginname",{id: myId},
                function(result){
                    $("#lname").html(result);
                });
            }
            
            //Ajax call
            function addRow(){
                doAjaxCall("GET","addrow",{id: myId}, nullFcn);
            }
            
            
            //Ajax call
            function submitSet(lst){
                doAjaxCall("GET","submitset",{id: myId, cards: lst}, nullFcn);
            }
        </script>
        <title>Set Game</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <div class="container">
            <table id="grid">
                
            </table>
        </div>
        <div class="container">
            <span id="lname">Welcome to Set Game, </span>
        </div>
    </body>
</html>
